{"openapi":"3.0.1","info":{"title":"QuckApp Permission Service API","description":"## RBAC Permission Management Service\n\nThe QuckApp Permission Service provides role-based access control (RBAC)\ncapabilities for managing permissions across the QuckApp ecosystem.\n\n### Features\n- **Role Management** - Create, update, delete roles with permissions\n- **Permission Management** - Define and query available permissions\n- **User Role Assignment** - Assign/revoke roles to/from users\n- **Permission Checking** - Verify user permissions in real-time\n- **Workspace Scoping** - Permissions scoped to specific workspaces\n\n### Authentication\nThis service is typically called by other microservices. Authentication is handled\nvia API Key or internal service mesh authentication.\n\n### Integration\n- Works with Casbin for policy enforcement\n- Integrates with Auth Service for user identity\n- Publishes permission events to Kafka\n","contact":{"name":"QuckApp Team","url":"https://quckapp.com","email":"support@quckapp.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"/","description":"Permission Service Base Path"},{"url":"http://localhost:8083","description":"Local Development"},{"url":"https://api.quckapp.com/permissions","description":"Production"}],"tags":[{"name":"Permission Check","description":"Real-time permission verification"},{"name":"Permissions","description":"Permission definitions and queries"},{"name":"Permissions","description":"RBAC permission management APIs"},{"name":"Roles","description":"Role management operations - create, read, update, delete roles"},{"name":"User Roles","description":"User role assignment and revocation"}],"paths":{"/api/permissions/roles/{id}":{"get":{"tags":["Permissions"],"summary":"Get role by ID","operationId":"getRoleById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRoleResponse"}}}}}},"put":{"tags":["Permissions"],"summary":"Update role","operationId":"updateRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRoleResponse"}}}}}},"delete":{"tags":["Permissions"],"summary":"Delete role","operationId":"deleteRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}},"/api/permissions/users/assign":{"post":{"tags":["Permissions"],"summary":"Assign role to user","operationId":"assignRole","parameters":[{"name":"X-User-Id","in":"header","required":false,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignRoleRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseUserRoleResponse"}}}}}}},"/api/permissions/roles":{"post":{"tags":["Permissions"],"summary":"Create a new role","operationId":"createRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRoleResponse"}}}}}}},"/api/permissions/check":{"post":{"tags":["Permissions"],"summary":"Check if user has permission","operationId":"checkPermission","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckPermissionRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponsePermissionCheckResponse"}}}}}}},"/api/permissions":{"get":{"tags":["Permissions"],"summary":"Get all permissions","operationId":"getAllPermissions","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListPermissionResponse"}}}}}}},"/api/permissions/users/{userId}/workspace/{workspaceId}":{"get":{"tags":["Permissions"],"summary":"Get user permissions in workspace","operationId":"getUserPermissions","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"workspaceId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseUserPermissionsResponse"}}}}}}},"/api/permissions/roles/workspace/{workspaceId}":{"get":{"tags":["Permissions"],"summary":"Get roles by workspace","operationId":"getRolesByWorkspace","parameters":[{"name":"workspaceId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListRoleResponse"}}}}}}},"/api/permissions/resource/{resource}":{"get":{"tags":["Permissions"],"summary":"Get permissions by resource","operationId":"getPermissionsByResource","parameters":[{"name":"resource","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListPermissionResponse"}}}}}}},"/api/permissions/users/{userId}/roles/{roleId}/workspace/{workspaceId}":{"delete":{"tags":["Permissions"],"summary":"Revoke role from user","operationId":"revokeRole","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"roleId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"workspaceId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseVoid"}}}}}}}},"components":{"schemas":{"UpdateRoleRequest":{"type":"object","properties":{"name":{"maxLength":50,"minLength":0,"type":"string"},"description":{"maxLength":255,"minLength":0,"type":"string"},"priority":{"type":"integer","format":"int32"},"permissionIds":{"uniqueItems":true,"type":"array","items":{"type":"string","format":"uuid"}}}},"ApiResponseRoleResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/RoleResponse"},"timestamp":{"type":"string","format":"date-time"}}},"PermissionResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"resource":{"type":"string"},"action":{"type":"string"},"description":{"type":"string"}}},"RoleResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"workspaceId":{"type":"string","format":"uuid"},"name":{"type":"string"},"description":{"type":"string"},"priority":{"type":"integer","format":"int32"},"permissions":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/PermissionResponse"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"system":{"type":"boolean"}}},"AssignRoleRequest":{"required":["roleId","userId","workspaceId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"roleId":{"type":"string","format":"uuid"},"workspaceId":{"type":"string","format":"uuid"},"channelId":{"type":"string","format":"uuid"}}},"ApiResponseUserRoleResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/UserRoleResponse"},"timestamp":{"type":"string","format":"date-time"}}},"UserRoleResponse":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"roleId":{"type":"string","format":"uuid"},"roleName":{"type":"string"},"workspaceId":{"type":"string","format":"uuid"},"channelId":{"type":"string","format":"uuid"},"grantedBy":{"type":"string","format":"uuid"},"grantedAt":{"type":"string","format":"date-time"}}},"CreateRoleRequest":{"required":["name","workspaceId"],"type":"object","properties":{"workspaceId":{"type":"string","format":"uuid"},"name":{"maxLength":50,"minLength":0,"type":"string"},"description":{"maxLength":255,"minLength":0,"type":"string"},"priority":{"type":"integer","format":"int32"},"permissionIds":{"uniqueItems":true,"type":"array","items":{"type":"string","format":"uuid"}}}},"CheckPermissionRequest":{"required":["action","resource","userId","workspaceId"],"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"workspaceId":{"type":"string","format":"uuid"},"resource":{"type":"string"},"action":{"type":"string"},"channelId":{"type":"string","format":"uuid"}}},"ApiResponsePermissionCheckResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/PermissionCheckResponse"},"timestamp":{"type":"string","format":"date-time"}}},"PermissionCheckResponse":{"type":"object","properties":{"allowed":{"type":"boolean"},"reason":{"type":"string"}}},"ApiResponseListPermissionResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/PermissionResponse"}},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseUserPermissionsResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/UserPermissionsResponse"},"timestamp":{"type":"string","format":"date-time"}}},"UserPermissionsResponse":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"workspaceId":{"type":"string","format":"uuid"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}},"permissions":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"ApiResponseListRoleResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}},"timestamp":{"type":"string","format":"date-time"}}},"ApiResponseVoid":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object"},"timestamp":{"type":"string","format":"date-time"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT Bearer token authentication.\n\nObtain a token from the Auth Service by calling `/v1/login`.\nInclude the token in the Authorization header:\n`Authorization: Bearer <token>`\n","scheme":"bearer","bearerFormat":"JWT"},"apiKey":{"type":"apiKey","description":"API Key authentication for internal services.\n\nUsed for service-to-service communication within the QuckApp ecosystem.\nInclude the key in the X-API-Key header:\n`X-API-Key: <your-api-key>`\n","name":"X-API-Key","in":"header"}}}}